<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>All Employees | OM Enterprise</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Fonts & Icons -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Roboto&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Roboto',sans-serif;}

/* ===== BACKGROUND (LOGIN SAME) ===== */
body{
  min-height:100vh;
  background:
    linear-gradient(rgba(0,0,0,0.7),rgba(0,0,0,0.7)),
    url("image/background.png") center/cover no-repeat;
  color:#fff;
  padding:30px;
}

/* ===== TITLE ===== */
h1{
  text-align:center;
  font-family:'Poppins',sans-serif;
  font-size:36px;
  color:#00d4ff;
  margin-bottom:25px;
}

/* ===== SEARCH ===== */
.search-sort{
  display:flex;
  justify-content:center;
  gap:15px;
  flex-wrap:wrap;
  margin-bottom:35px;
}
.search-sort input,
.search-sort select{
  background:rgba(255,255,255,0.1);
  border:1px solid rgba(255,255,255,0.25);
  color:#fff;
  padding:10px 15px;
  border-radius:10px;
  outline:none;
}
.search-sort input::placeholder{color:rgba(255,255,255,0.6);}

/* ===== GRID ===== */
.employee-container{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:25px;
}

/* ===== CARD ===== */
.card{
  background:rgba(255,255,255,0.08);
  backdrop-filter:blur(14px);
  border-radius:18px;
  padding:22px;
  box-shadow:0 12px 35px rgba(0,0,0,0.6);
  transition:0.35s;
  cursor:pointer;
  position:relative;
}
.card:hover{
  transform:translateY(-8px);
  box-shadow:0 18px 45px rgba(0,212,255,0.4);
}

.card h3{
  font-family:'Poppins',sans-serif;
  color:#00d4ff;
  margin-bottom:12px;
}

.card p{
  font-size:14px;
  margin:6px 0;
  opacity:0.9;
}
.card i{color:#00d4ff;margin-right:6px;}

.badge{
  position:absolute;
  top:15px;
  right:15px;
  padding:5px 12px;
  border-radius:20px;
  font-size:12px;
  font-weight:600;
}
.active{background:#00ff9f;color:#000;}
.leave{background:#ff5e57;color:#fff;}
.remote{background:#f9ca24;color:#000;}

/* ===== MODAL ===== */
#attendanceModal{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.75);
  align-items:center;
  justify-content:center;
  z-index:1000;
}

.modal-box{
  width:90%;
  max-width:720px;
  background:rgba(255,255,255,0.12);
  backdrop-filter:blur(16px);
  border-radius:20px;
  padding:25px;
  box-shadow:0 20px 60px rgba(0,0,0,0.7);
  position:relative;
}

.modal-box h2{
  color:#00d4ff;
  margin-bottom:15px;
  font-family:'Poppins',sans-serif;
}

.modal-box table{
  width:100%;
  border-collapse:collapse;
}

.modal-box th,
.modal-box td{
  padding:10px;
  border-bottom:1px solid rgba(255,255,255,0.25);
  text-align:center;
}

.modal-box th{color:#00d4ff;}

.close{
  position:absolute;
  top:15px;
  right:20px;
  font-size:26px;
  cursor:pointer;
  color:#fff;
}

/* ===== MOBILE ===== */
@media(max-width:600px){
  h1{font-size:28px;}
}
</style>
</head>

<body>

<h1>All Employees</h1>

<div class="search-sort">
  <input type="text" id="searchInput" placeholder="Search employee..." onkeyup="filterEmployees()">
  <select id="sortSelect" onchange="sortEmployees()">
    <option value="">Sort By</option>
    <option value="id">Employee ID</option>
    <option value="name">Name</option>
    <option value="dept">Department</option>
  </select>
</div>

<div class="employee-container" id="employeeContainer"></div>

<!-- ===== MODAL ===== -->
<div id="attendanceModal">
  <div class="modal-box">
    <span class="close" onclick="closeModal()">&times;</span>
    <h2 id="modalTitle"></h2>

    <table>
      <thead>
        <tr>
          <th>Date</th>
          <th>IN</th>
          <th>OUT</th>
          <th>Hours</th>
        </tr>
      </thead>
      <tbody id="modalBody"></tbody>
    </table>
  </div>
</div>

<script>
// ===== EMPLOYEES =====
const employees = [
  {id:101,name:"Ishwarbhai Patel",dept:"Production",email:"ishwar@omenterprise.com",phone:"9978493440",status:"Active"},
  {id:104,name:"Shilesh Panchal",dept:"Production",email:"shileshpanchal@omenterprise.com",phone:"9988776655",status:"Active"},
  {id:105,name:"Nitin Panchal",dept:"Helper",email:"nitinpanchal@omenterprise.com",phone:"8899776655",status:"Active"}
];

let filtered=[...employees];

// ===== RENDER =====
function render(data){
  const box=document.getElementById("employeeContainer");
  box.innerHTML="";
  data.forEach(e=>{
    const b=e.status==="Active"?"active":e.status==="Leave"?"leave":"remote";
    box.innerHTML+=`
      <div class="card" onclick="openAttendance(${e.id},'${e.name}')">
        <div class="badge ${b}">${e.status}</div>
        <h3>${e.name}</h3>
        <p><i class="fa fa-id-badge"></i>ID: ${e.id}</p>
        <p><i class="fa fa-briefcase"></i>${e.dept}</p>
        <p><i class="fa fa-envelope"></i>${e.email}</p>
        <p><i class="fa fa-phone"></i>${e.phone}</p>
      </div>`;
  });
}

// ===== FILTER / SORT =====
function filterEmployees(){
  const q=document.getElementById("searchInput").value.toLowerCase();
  filtered=employees.filter(e=>
    e.id.toString().includes(q) ||
    e.name.toLowerCase().includes(q) ||
    e.dept.toLowerCase().includes(q)
  );
  render(filtered);
}

function sortEmployees(){
  const k=document.getElementById("sortSelect").value;
  if(k){
    filtered.sort((a,b)=>{
      if(typeof a[k]==="string") return a[k].localeCompare(b[k]);
      return a[k]-b[k];
    });
  }
  render(filtered);
}

// ===== ATTENDANCE MODAL =====
function openAttendance(id,name){
  const modal=document.getElementById("attendanceModal");
  const body=document.getElementById("modalBody");
  document.getElementById("modalTitle").innerText=name+" - Attendance History";
  body.innerHTML="";

  const data=JSON.parse(localStorage.getItem("attendance"))||[];
  const rows=data.filter(r=>r.id==id);

  if(rows.length===0){
    body.innerHTML="<tr><td colspan='4'>No attendance records</td></tr>";
  }else{
    rows.forEach(r=>{
      body.innerHTML+=`
        <tr>
          <td>${r.date}</td>
          <td>${r.inTime}</td>
          <td>${r.outTime}</td>
          <td>${r.workHours}</td>
        </tr>`;
    });
  }
  modal.style.display="flex";
}

function closeModal(){
  document.getElementById("attendanceModal").style.display="none";
}

render(filtered);
</script>

</body>
</html>
